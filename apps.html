<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gabriel Apps Portfolio</title>
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #1b1c1e;
      --card: #242529;
      --text: #f5f5f5;
      --accent: #3b82f6;
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Nunito Sans', sans-serif;
    }
    body {
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      background: var(--bg);
      z-index: 1000;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
    }
    .toggle-lang {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
    }
    .toggle-lang input {
      appearance: none;
      width: 40px;
      height: 20px;
      background: var(--card);
      border-radius: 10px;
      position: relative;
      outline: none;
      transition: background 0.3s;
    }
    .toggle-lang input:checked {
      background: var(--accent);
    }
    .toggle-lang input::before {
      content: '';
      position: absolute;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #fff;
      top: 1px;
      left: 1px;
      transition: transform 0.3s;
    }
    .toggle-lang input:checked::before {
      transform: translateX(20px);
    }
    main {
      max-width: 1200px;
      margin: 3rem auto;
      padding: 0 1rem;
    }
    .hero {
      text-align: center;
      margin-bottom: 3rem;
    }
    .hero h1 {
      font-size: clamp(2rem, 5vw, 3rem);
      margin-bottom: 0.5rem;
    }
    .hero h2 {
      font-size: clamp(1rem, 3vw, 1.5rem);
      font-weight: 400;
      color: var(--accent);
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
    }
    .card {
      background: var(--card);
      border-radius: 4px;
      padding: 1.5rem;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.6);
    }
    .card h3 {
      font-size: 1.25rem;
      margin-bottom: 0.5rem;
    }
    .card p {
      font-size: 0.95rem;
      margin-bottom: 1rem;
      color: #cfcfcf;
    }
    .actions {
      margin-top: auto;
      display: flex;
      gap: 1rem;
    }
    .btn {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.3s;
    }
    .btn-primary {
      background: var(--accent);
      color: #fff;
    }
    .btn-outline {
      background: transparent;
      color: var(--accent);
      border: 1px solid var(--accent);
    }
    .btn-primary:hover {
      background: #2563eb;
    }
    .btn-outline:hover {
      background: var(--accent);
      color: #fff;
    }
    /* Modal */
/* Modal */
#modal {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.7);
  z-index: 2000;
}
#modal.active {
  display: flex;
}
.modal-content {
  background: var(--card);
  border-radius: 1rem;
  max-width: 600px; /* ligeramente m√°s ancho */
  width: 90%;
  max-height: 80vh; /* evita que se salga de la pantalla */
  overflow-y: auto; /* permite scroll interno si hay mucho contenido */
  padding: 2rem;
  position: relative;
  line-height: 1.6; /* altura de l√≠nea m√°s c√≥moda */
}
/* T√≠tulos del modal en color de acento */
.modal-content h3,
.modal-content h4 {
  color: var(--accent);
  margin-bottom: 0.5rem;
}
/* Margen inferior para p√°rrafos y listas */
.modal-content p {
  margin-bottom: 1rem;
}
.modal-content ul {
  margin-bottom: 1rem;
  list-style: none;      /* quitamos las vi√±etas nativas */
  padding-left: 0;       /* eliminamos sangr√≠a */
}
/* Personalizaci√≥n de cada elemento de lista */
.modal-content ul li {
  margin-bottom: 0.5rem;
  padding-left: 1.5rem;
  position: relative;
}
/* A√±adimos un punto o icono de acento antes de cada elemento */
.modal-content ul li::before {
  content: "‚óè";          /* puedes cambiar por un icono Font Awesome si lo tienes cargado */
  color: var(--accent);
  position: absolute;
  left: 0;
  top: 0.1rem;
  font-size: 0.5rem;
}
/* Bot√≥n de cerrar con mayor √°rea clicable */
.close-modal {
  position: absolute;
  top: 0.75rem;
  right: 0.75rem;
  background: none;
  border: none;
  font-size: 1.5rem;
  color: var(--text);
  cursor: pointer;
  padding: 0.25rem;
  transition: color 0.3s;
}
.close-modal:hover {
  color: var(--accent);
}

    footer {
      text-align: center;
      padding: 2rem 1rem;
      color: #777;
    }
    a {
      color: var(--accent);
    }
    .no-scroll { overflow: hidden; }
main {
  position: relative; /* importante para que la flecha se posicione dentro */
}

.back-arrow {
  position: absolute;
  top: -2rem;
  left: 1rem;
  display: inline-block;
}

.back-arrow img {
  width: 32px; /* ajusta el tama√±o a lo que quieras */
  height: auto;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.back-arrow img:hover {
  transform: scale(1.1);
}

  </style>
  <!-- AOS Animation -->
<link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>

</head>
<body>
  <!-- Header -->
  <header>
    <div class="logo" data-i18n="logo">Gabriel Medina</div>
    <label class="toggle-lang">
      <span>ES</span>
      <input type="checkbox" id="langSwitch" aria-label="Cambiar idioma" />
      <span>EN</span>
    </label>
  </header>

  <!-- Main -->
  <main>
      <a href="index.html" class="back-arrow">
    <img src="arrow_back_24dp_3B82F6_FILL0_wght400_GRAD0_opsz24.png" alt="Volver" />
  </a>
    <!-- Hero -->
    <section class="hero">
      <h1 data-i18n="heroTitle">Aplicaciones hechas a medida</h1>
      <h2 data-i18n="heroSub">Portafolio de proyectos reales</h2>
    </section>

    <!-- Portfolio Grid -->
    <section class="grid" id="projectsGrid"><!-- JS injects cards here --></section>
  </main>

  <!-- Modal -->
  <div id="modal">
    <div class="modal-content">
      <button class="close-modal" aria-label="Cerrar">&times;</button>
      <div id="modalBody"><!-- dynamic --></div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p>&copy; <span id="year"></span> Gabriel Medina</p>
  </footer>

  <!-- JavaScript -->
  <script>
    // Translations
 const translations = {
  es: {
    logo: "Gabriel Medina",
    heroTitle: "Aplicaciones hechas a medida",
    heroSub: "Portafolio de proyectos reales",
    btnMore: "Ver m√°s",
    btnVisit: "Visitar",
    techTitle: "Stack tecnol√≥gico",
    // üëá NUEVO
    visitChooserTitle: "¬øA d√≥nde quer√©s ir?",
  },
  en: {
    logo: "Gabriel Medina",
    heroTitle: "Tailored web applications",
    heroSub: "Real-world project portfolio",
    btnMore: "Details",
    btnVisit: "Visit",
    techTitle: "Tech stack",
    // üëá NUEVO
    visitChooserTitle: "Where do you want to go?",
  },
};

    // Projects
    const projects = [
        {
  name: {
    es: "Gestor Inventario & Ventas",
    en: "Inventory & Sales Manager",
  },
  desc: {
    es: "Gesti√≥n integral de inventario y ventas en tiempo real.",
    en: "Real-time inventory and sales management.",
  },
  stack: [
    "HTML", "CSS", "JavaScript", "Node",
    "Express", "MySQL", "JWT",
    "html2canvas", "jsPDF"
  ],
  features: {
    es: [
     "Dise√±o Responsivo y Accesible",
      "Inicio de sesi√≥n seguro (JWT)",
      "Alta de productos con autocompletado inteligente",
      "B√∫squeda y filtros avanzados por ID, estado, fechas, precio y atributos",
      "Edici√≥n masiva de precios sobre resultados filtrados",
      "Registro de ventas con m√∫ltiples medios de pago y recargos/descuentos",
      "Pagos con tarjeta en cuotas (coeficiente financiero editable)",
      "Estad√≠sticas mensuales de ventas (√≠tems/top colores, medios de pago, ganancia)",
      "Exportaci√≥n de reportes a PDF"
    ],
    en: [
      "Responsive and accessible design",
      "Secure login (JWT)",
      "Product creation with smart autocompletion",
      "Advanced search & filters by ID, status, date, price and attributes",
      "Bulk price update for filtered results",
      "Sales logging with multiple payment methods and surcharges/discounts",
      "Credit-card payments with installments  (editable coefficient)",
      "Monthly stats (top items/colors, payment method, profit) with navigation",
      "PDF report export"
    ],
  },
  url: "https://octopus-app.com.ar/inventario-aniceta/",
}
,
{
  name: {
    es: "Fidelizaci√≥n de Clientes",
    en: "Customer Loyalty Platform",
  },
  desc: {
    es: "Plataforma de fidelizaci√≥n de clientes desarrollada a medida para Cine Rex.",
    en: "Custom-built customer loyalty platform for Cine Rex.",
  },
  stack: [
    "HTML", "CSS", "JavaScript",
    "Animate.css", "SweetAlert2", "Toastify",
    "Fetch API", "Backend API (Node + Express + MySQL)"
  ],
  features: {
    es: [
      "Registro de clientes en 4 pasos con validaciones y prevenci√≥n de duplicados",
      "Interfaz interactiva con animaciones y sonidos para mejorar la experiencia",
      "Integraci√≥n directa con WhatsApp para agendar clientes",
      "Gesti√≥n de campa√±as de beneficios con asignaci√≥n y fechas activas",
      "Avisos de cumplea√±os de la comunidad en tiempo real",
      "Acceso simple a base de datos de clientes con b√∫squeda por DNI",
      "Cambio de estado optimista (pendiente, agendado, notificado, canjeado)",
      "Control de ingresos por cliente con actualizaciones en tiempo real"
    ],
    en: [
      "4-step customer registration with validations and duplicate prevention",
      "Interactive interface with animations and sounds for enhanced UX",
      "Direct WhatsApp integration for customer scheduling",
      "Benefit campaign management with customer assignment and active date ranges",
      "Real-time community birthday alerts",
      "Simple database access with DNI search",
      "Optimistic state change (pending, scheduled, notified, redeemed)",
      "Per-customer income tracking with real-time updates"
    ],
  },
visitOptions: [
        {
          label: { es: "Formulario de usuarios", en: "User form" },
          url: "https://octopus-app.com.ar/comunidad-rex/",
        },
        {
          label: { es: "Panel de administrador", en: "Admin panel" },
          url: "https://octopus-app.com.ar/comunidad-rex/datos.html",
        },
      ],
    },
     {
  name: {
    es: "Cat√°logo & Pedidos Online",
    en: "Online Catalog & Orders",
  },
  desc: {
    es: "Men√∫ con carrito, pagos Mercado Pago y panel admin en vivo.",
    en: "Menu with cart, Mercado Pago checkout & live admin panel.",
  },
  stack: [
    "HTML", "CSS", "JavaScript",
    "SweetAlert2", "Toastify", "Sortable.js",
    "MercadoPago SDK", "Node", "Express", "MySQL", "JWT"
  ],
  features: {
    es: [
      "Login seguro (JWT) con vista seg√∫n rol",
      "Cat√°logo cacheado 1 h y agrupado por comidas/bebidas",
      "Carrito din√°mico con c√°lculo de env√≠o y total",
      "Checkout integrado con Mercado Pago",
      "Confirmaci√≥n autom√°tica v√≠a WhatsApp",
      "Edici√≥n de stock, precios e im√°genes (WebP) en admin",
      "Reordenar men√∫ drag-and-drop (Sortable.js)",
      "Panel de pedidos en tiempo real con cambio de estado"
    ],
    en: [
      "Secure login (JWT) with role-based view",
      "Catalog cached 1 h and grouped by food/drinks",
      "Dynamic cart with shipping & total calculation",
      "Integrated Mercado Pago checkout",
      "Automatic confirmation via WhatsApp",
      "Admin stock, price & image (WebP) editing",
      "Menu re-ordering via drag-and-drop (Sortable.js)",
      "Real-time orders panel with status update"
    ],
  },
  url: "https://octopus-app.com.ar/brillitos/",
},
{
  name: {
    es: "Chatbot IA para Cartelera de Cine (Tiempo Real)",
    en: "Real-Time Cinema Listings AI Chatbot"
  },
  desc: {
    es: "Asistente virtual que administra y responde sobre cartelera de cine (pel√≠culas, funciones, combos y horarios de boleter√≠a) consultando la base de datos en tiempo real.",
    en: "Virtual assistant that manages and answers about cinema listings (movies, showtimes, combos, and box office hours) by querying the database in real time."
  },
  stack: [
    "React", "Vite", "TailwindCSS", // UI del panel
    "JavaScript",
    "Node.js", "Express",           // API REST
    "SQLite (dev) / MySQL (prod)",  // Base de datos
    "OpenAI API", "n8n",            // Agente y orquestaci√≥n
    "WhatsApp (Business API)", "REST Webhooks"
  ],
  features: {
    es: [
      "Panel de administraci√≥n para Pel√≠culas: t√≠tulo, sinopsis, ATP, trailer_url, poster_url, flags (2x1/activa).",
      "Gesti√≥n de Funciones: pel√≠cula, fecha, m√∫ltiples horarios, formato (2D/3D), precio opcional y promo 2x1.",
      "Gesti√≥n de Combos con √≠tems (producto + cantidad) y precio total.",
      "Horarios de Boleter√≠a por d√≠a con opci√≥n de marcar cerrado (null).",
      "Respuestas del chatbot en tiempo real (n8n + OpenAI) leyendo la BD: pr√≥ximas funciones, precios, promos 2x1, combos y horarios.",
      "Validaciones simples en el panel y procesamiento antes de persistir (front) + API REST segura para el bot."
    ],
    en: [
      "Admin panel for Movies: title, synopsis, ATP rating, trailer_url, poster_url, flags (2x1/active).",
      "Showtime management: movie, date, multiple times, format (2D/3D), optional price and 2x1 promo.",
      "Combos management with items (product + quantity) and total price.",
      "Box office hours per weekday with 'closed' option (null).",
      "Real-time chatbot answers (n8n + OpenAI) by reading the DB: upcoming showtimes, prices, 2x1 promos, combos and hours.",
      "Lightweight front validations and pre-processing + secure REST API for the bot."
    ]
  },
    url: "https://octopus-app.com.ar/chat-rex/"

}

,
{
  name: {
    es: "Carta Digital",
    en: "Digital Menu",
  },
  desc: {
    es: "Gesti√≥n de carta digital con organizaci√≥n flexible, drag‚Äëand‚Äëdrop y optimizaci√≥n de im√°genes para bares y restaurantes.",
    en: "Digital menu management with flexible organisation, drag‚Äëand‚Äëdrop and image optimisation for bars and restaurants.",
  },
  stack: [
    "HTML5", "CSS3", "JavaScript (ES6+)",
    "SweetAlert2", "SortableJS", "Toastify.js", "AOS",
    "Node.js", "Express", "SQLite",
    "Multer", "Sharp", "JWT",
    "LocalStorage", "Fetch API"
  ],
  features: {
    es: [
      "Gestionar productos: crear, editar, eliminar y marcar subelementos (porciones, extras, etc.)",
      "Organizar grupos y categor√≠as con drag‚Äëand‚Äëdrop y persistir el orden en la base de datos",
      "Mostrar u ocultar √≠tems con cambio visual y visibilidad solo para administradores autenticados",
      "Gesti√≥n avanzada de stock con edici√≥n/eliminaci√≥n de combinaciones desde el popup de edici√≥n",
      "Carga de im√°genes comprimidas a WebP y redimensionadas autom√°ticamente",
      "Interfaz segura: botones de administraci√≥n visibles solo para usuarios autenticados (JWT en localStorage)",
      "Experiencia mejorada: auto‚Äëscroll a la √∫ltima categor√≠a creada, lazy load de im√°genes, animaciones AOS"
    ],
    en: [
      "Manage items: create, edit, delete and mark sub‚Äëitems (portions, extras, etc.)",
      "Organise groups and categories with drag‚Äëand‚Äëdrop, persisting the order in the database",
      "Show/hide items with visual feedback and visibility only for authenticated admins",
      "Advanced stock management: edit/remove combinations directly in the edit popup",
      "Upload images automatically compressed to WebP and resized",
      "Secure interface: admin buttons visible only to authenticated users (JWT in localStorage)",
      "Enhanced UX: auto‚Äëscroll to the last created category, lazy loading of images, AOS animations"
    ],
  },
  url: "https://elpatio427.com.ar/"
}
,{
  name: {
    es: "Generador de Gif Card",
    en: "Digital Gif Card Generator",
  },
  desc: {
    es: "Crea cupones con QR, comp√°rtelos y valida canjes de forma segura.",
    en: "Create QR Gif Card, share them and validate redemptions securely.",
  },
  stack: [
    "HTML", "CSS", "JavaScript",
    "SweetAlert2", "QRCode.js",
    "html2canvas", "Web Share API",
    "Express", "JWT"
  ],
  features: {
    es: [
      "Login seguro (JWT) v√≠a modal SweetAlert2",
      "Creaci√≥n de Gif Card con QR y metadatos personalizables",
      "Dise√±o previo editable antes de confirmar",
      "Compartir por Web Share API y descarga PNG",
      "Historial completo de cupones emitidos",
      "P√°gina p√∫blica con QR y acceso a WhatsApp",
      "Validaci√≥n/canje con estado vigente o expirado"
    ],
    en: [
      "Secure login (JWT) via SweetAlert2 modal",
      "Gif Card creation with QR and customizable metadata",
      "Editable preview before confirmation",
      "Share via Web Share API and PNG download",
      "Full history of issued Gif Card",
      "Public page with QR and WhatsApp shortcut",
      "Validation/redeem with active or expired status"
    ],
  },
  url: "https://octopus-app.com.ar/gif-card/",
},
{
  name: {
    es: "Inventario de Cocina",
    en: "Kitchen Inventory",
  },
  desc: {
    es: "Control de inventario de cocina con alertas y estad√≠sticas hist√≥ricas.",
    en: "Kitchen inventory control with alerts and historical stats.",
  },
  stack: [
    "HTML", "CSS", "JavaScript",
    "Express", "MySQL", "Node"
  ],
  features: {
    es: [
      "Alta, edici√≥n y eliminaci√≥n de productos v√≠a modal",
      "Control de stock con actualizaci√≥n en tiempo real",
      "Alertas visuales y orden prioritario para bajo stock",
      "Historial y desglose por intervalos de 30 minutos",
      "B√∫squeda r√°pida con scroll y resaltado temporal",
      "Confirmaci√≥n antes de eliminar productos",
      "Estad√≠sticas mensuales hasta 6 meses previos"
    ],
    en: [
      "Add, edit and delete products via modal",
      "Real-time stock control and updates",
      "Visual alerts and priority ordering for low stock",
      "History and breakdown by 30-minute intervals",
      "Quick search with smooth scroll and temporary highlight",
      "Delete confirmation popups",
      "Monthly stats up to 6 months back"
    ],
  },
  url: "https://octopus-app.com.ar/inventario-cocina",
}
,{
  name: {
    es: "Gesti√≥n de Turnos & Calendario",
    en: "Scheduling & Calendar System",
  },
  desc: {
    es: "Reservas online, bloqueo de franjas, estados de trabajo y contacto directo.",
    en: "Online bookings, slot blocking, work statuses and direct client contact.",
  },
  stack: [
    "HTML", "CSS", "JavaScript",
    "FullCalendar (core/dayGrid/interaction/es)",
    "Nunito Sans", "Express"
  ],
  features: {
    es: [
      "Login de operarios; guarda operario_id en sessionStorage",
      "Formulario de reservas con validaci√≥n y horarios disponibles",
      "Calendario FullCalendar con turnos y bloqueos (vista mensual)",
      "Estados: Confirmar ¬∑ En camino ¬∑ Realizado + notificaci√≥n por WhatsApp",
      "Bloqueo/desbloqueo de franjas desde el calendario",
      "Disponibilidad din√°mica consultada al backend antes de reservar",
      "Indicadores por color: bloqueado, pendiente, asignado, confirmado, realizado"
    ],
    en: [
      "Worker login; stores operario_id in sessionStorage",
      "Booking form with validation and available time slots",
      "FullCalendar with appointments and blocks (month view)",
      "Statuses: Confirmed ¬∑ On the way ¬∑ Completed + WhatsApp notification",
      "Block/unblock time slots from the calendar",
      "Dynamic availability fetched from backend before booking",
      "Color-coded statuses: blocked, pending, assigned, confirmed, completed"
    ],
  },
visitOptions: [
  {
    label: { es: "Formulario de reserva", en: "Booking form" },
    url: "https://octopus-app.com.ar/seguimiento-demo/reserva",
  },
  {
    label: { es: "Panel de administrador", en: "Admin panel" },
    url: "https://octopus-app.com.ar/seguimiento-demo/admin.html",
  },
],

}
,
{
  name: {
    es: "Agenda & Servicios",
    en: "Scheduling & Services",
  },
  desc: {
    es: "Agenda por d√≠as, precios en vivo y novedades con im√°genes. Panel admin protegido.",
    en: "Day-by-day agenda, live pricing and image news. Password-protected admin panel.",
  },
  stack: [
    "HTML", "CSS", "JavaScript",
    "Swiper.js", "SweetAlert2", "AOS",
    "Fetch API", "Nunito Sans", "Express"
  ],
  features: {
    es: [
      "Agenda deslizable (Swiper.js) con d√≠as y horarios cargados din√°micamente",
      "Actualizaci√≥n de precios en vivo (solo admin) con guardado inmediato v√≠a API",
      "Novedades con imagen: alta/edici√≥n/borrado y 'Ver m√°s' con inscripci√≥n por WhatsApp",
      "Autenticaci√≥n admin con persistencia en localStorage y alternancia visitante/admin",
      "UX: SweetAlert2 para popups, loader inicial y animaciones AOS",
      "Bot√≥n r√°pido de WhatsApp para inscripciones"
    ],
    en: [
      "Swipeable agenda (Swiper.js) with dynamically loaded days/time slots",
      "Live price editing (admins only) with immediate API save",
      "News with image: create/edit/delete and 'Read more' linking to WhatsApp sign-up",
      "Admin auth with localStorage persistence; visitor/admin UI toggle",
      "UX: SweetAlert2 popups, initial loader and AOS animations",
      "Quick WhatsApp button for sign-ups"
    ],
  },
  url: "https://octopus-app.com.ar/ayun",
}

    ];

    // Select language
    let lang = localStorage.getItem("lang") || "es";
    document.getElementById("langSwitch").checked = lang === "en";

    // Apply translations to static elements and render projects
    function applyTranslations() {
      document.querySelectorAll("[data-i18n]").forEach((el) => {
        const key = el.getAttribute("data-i18n");
        el.textContent = translations[lang][key];
      });
      renderProjects();
    }

    // Render project cards
    function renderProjects() {
      const grid = document.getElementById("projectsGrid");
      grid.innerHTML = "";
      projects.forEach((p, i) => {
        const card = document.createElement("article");
        card.className = "card";
        card.setAttribute("data-aos", "fade-up"); // üëà esta l√≠nea

     card.innerHTML = `
  <h3>${p.name[lang]}</h3>
  <p>${p.desc[lang]}</p>
  <div class="actions">
    <button class="btn btn-primary" data-index="${i}" data-action="details">
      ${translations[lang].btnMore}
    </button>
    <!-- üëá Agregar data-action y data-index -->
    <a class="btn btn-outline"
       href="${p.url}" target="_blank" rel="noopener"
       data-action="visit" data-index="${i}">
       ${translations[lang].btnVisit}
    </a>
  </div>
`;

        grid.appendChild(card);
      });
    }

    // Modal handlers
 function openModal(html) {
  const modalBody = document.getElementById("modalBody");
  modalBody.innerHTML = html;
  document.getElementById("modal").classList.add("active");
  document.body.classList.add("no-scroll"); // üëà
}
function closeModal() {
  document.getElementById("modal").classList.remove("active");
  document.body.classList.remove("no-scroll"); // üëà
}
document.addEventListener("keydown", (e) => {
  if (e.key === "Escape" && document.getElementById("modal").classList.contains("active")) {
    closeModal();
  }
});

  // Details modal (como ya lo ten√≠as)
  function openDetails(i) {
    const p = projects[i];
    openModal(`
      <h3>${p.name[lang]}</h3>
      <p>${p.desc[lang]}</p>
      <h4>${translations[lang].techTitle}</h4>
      <p>${p.stack.join(", ")}</p>
      <ul>${p.features[lang].map((f) => `<li>${f}</li>`).join("")}</ul>
     
    `);
  }

  // üëáüëá NUEVO: modal ‚Äúdos botones‚Äù para visitar
// Modal ‚Äúdos botones‚Äù sin Cancelar (se cierra con la X o clic en el fondo)
function openVisitChooser(i) {
  const p = projects[i];
  if (!p.visitOptions || p.visitOptions.length === 0) return;

  const optionsHTML = p.visitOptions
    .map((opt, idx) => `
      <a class="btn ${idx === 0 ? "btn-primary" : "btn-outline"}"
         href="${opt.url}" target="_blank" rel="noopener">
        ${opt.label[lang]}
      </a>
    `)
    .join("");

  openModal(`
    <h3 style="margin-bottom:.5rem;">${translations[lang].visitChooserTitle}</h3>
    <p style="margin-bottom:1rem;"><strong>${p.name[lang]}</strong></p>
    <div style="display:flex; gap:1rem; flex-wrap:wrap;">${optionsHTML}</div>
  `);
}

  // Click events
  document.addEventListener("click", (e) => {
    // Cerrar modal (X o click fondo)
    if (e.target.closest(".close-modal") || e.target.id === "modal") {
      closeModal();
      return;
    }

    // Detalles
    if (e.target.matches('[data-action="details"]')) {
      openDetails(e.target.dataset.index);
      return;
    }

    // Visitar (interceptar solo si hay visitOptions)
    const visitLink = e.target.closest('[data-action="visit"]');
    if (visitLink) {
      const i = visitLink.dataset.index;
      const p = projects[i];
      if (p?.visitOptions?.length >= 2) {
        e.preventDefault(); // no vamos directo, mostramos el pop-up
        openVisitChooser(i);
      }
    }
  });
    // Language switch
    document.getElementById("langSwitch").addEventListener("change", (e) => {
      lang = e.target.checked ? "en" : "es";
      localStorage.setItem("lang", lang);
      applyTranslations();
    });

    // Init
    document.getElementById("year").textContent = new Date().getFullYear();
    applyTranslations();
    AOS.init({
  duration: 800,
  once: true,
});

  </script>
</body>
</html>
